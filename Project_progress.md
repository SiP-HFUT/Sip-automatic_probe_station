# 硅光芯片自动测试平台搭建

## 背景

目前实验室流片中大多数所设计的是无源器件。由于这些器件常常具有较多的结构参数变量，因此数量常常较多，手动测试非常的耗时。

本项目希望搭建一个可实现自动测试硅光芯片上的无源器件的系统和软件。由于对于无源器件，通常只需要测试其光谱响应，这为实现程序化的器件自动测试提供了方便。

此项目放在GitHub上的目的是为了程序更新、共享最新的程序、进度和经验、共同编辑一些文件。

UBC所使用的硅光芯片自动测试的软件已被发布在[pyOptomip](https://github.com/SiEPIC/pyOptomip)。由于所使用的位移台、激光器、功率计不一样，该软件无法直接用于我们的测试平台，但其仍然可以作为一个重要的参考。

（该文档将根据进展情况更新）

## 基本思路

目前初步构想的自动测试的基本流程如下图所示。

<img src="md_files/work_flow.jpg" style="zoom:20%;" />

- 器件gds坐标导入：Klayout中，我们可以在光路的入口光栅耦合器处，放置具有一定格式的光路描述信息（Text图层），如下图的最左图所示。之后可使用[SiEPIC Tools](https://github.com/SiEPIC/SiEPIC-Tools)中的坐标导出功能，将版图中所有的具有该格式的Text图层的描述信息以及相应的坐标导出，成txt文件，如下图最右图所示。如此，便可实现版图上所有器件坐标及相应的器件描述信息的导出。可被识别的描述信息的格式为 ：opt_in_polarization_lambda_device_description

  ![](md_files/coordinate_export.jpg)

- 器件列表生成：将上述导出的包含器件坐标和描述的txt文件，导入到所搭建的自动测试GUI中，其将生成器件列表。
- 芯片调平：调节使得芯片与光学平台平行。否则，在自动测试过程中，光纤阵列与芯片的距离将会变化，可能会导致其碰或挤压至芯片，进而损坏光纤。
- 芯片调正：芯片的长宽边缘分别于位移台的xy位移方向平行。这是位移台能够根据gds坐标，准确移动到芯片上器件的前提。
- 耦合位置自动优化：控制电动位移台在某个范围内移动，直至找到最佳耦合功率的位置。其可通过优化算法来快速实现。

#### 使用设备

目前合肥工业大学硅光实验室使用以下主要设备用于硅光器件测试：

- 电动位移平台：KYC06020-G，骏河
- 电动位移平台控制器：DS102MS，骏河
- 激光器主机：8163B，是德
- 激光模块（嵌在激光器主机中）：81060A，是德
- 光功率计（8端口）：N7745A，是德
- 电压源：DP932A，普源

所涉及的相关设备的使用手册/编程手册已经全部放置在 instrument_mannuals 文件夹内。

## 待确定问题

目前有一些初步问题，有待确定。

1.（程锐）从工作流程，可以看到，需要使用某总控制平台，去控制、协调不同设备的工作。可否通过 python 或 labview 去实现该目的？

- （2023-1-18，程锐答）：可能的方式，是通过Python中的 第三方库  [**pyvisa**](https://pyvisa.readthedocs.io/en/latest/) 来实现对仪器的控制，其是基于VISA（虚拟仪器软件

  构）内核的python第三方库，具有较好的可读性。初步看了一下，[pyOptomip](https://github.com/SiEPIC/pyOptomip)也是基于pyvisa所搭建。

  pyvisa 可对每一个仪器，创建一个对象，之后，可通过该对象，调用该仪器的SCPI（Standard Commands for Programmable Instruments）命令。每个仪器的SCPI命令，都可以从其编程手册中找到。案例之一，可从本文件夹中的"\learning_codes\ds102移动控制程序实例.py"中找到。

  除了Python，Matlab也提供 相似的VISA库，见 https://ww2.mathworks.cn/help/instrument/visa-overview.html

- 其它？



2.（程锐）不同设备之间，通过何种方式进行相互通讯？（GPIB，USB？）

（2023-1-18，程锐答）部分上述回答包含该问题的解决方案。

## 分工（建议）：

- 总控制代码的编写：郑焱烽、 冯佳旺
- 激光器、功率器的控制。光谱测试的代码实现：郑焱烽、张申昊（2022年毕设）

- 位移台的移动控制： 冯佳旺
- 位置优化算法：冯佳旺

## 项目安排

### 2023年1-2月

熟悉一写相关仪器的用法和它们的SCIP命令。考虑哪些命令可以用在本项目中。

SCIP命令可见于仪器的编程手册，或用户手册中的编程部分。

所有仪器的手册都可见于"\instrument_mannuals"。

建议：

#### 郑焱烽

- 熟悉激光器和光功率计的SCIP命令。

#### 冯佳旺

- 熟悉电动位移台（DS102）的具体参数意义、相关SCIP命令。

#### 张申昊

- 熟悉激光器和电压源的SCIP命令。

### 2023年2月-3月

返校后，可在实验室中，尝试通过VISA，通过串口、Lan或USB等方式取得与仪器的连接。之后，可将之前所学习的SCIP命令，编写并验证一些基本的仪器控制程序。



## 进展

### 合工大

#### 郑焱烽



#### 冯佳旺



#### 张申昊









